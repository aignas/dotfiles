#!/usr/bin/env ion
#
# Copyright: aignas
#
# Minimal ion shell inspired by:
# https://github.com/sindresorhus/pure
#
# This uses rust CLI applications in order to have nice features, such as the
# git prompt, which is inspired by:
# https://github.com/olivierverdier/zsh-git-prompt

# {{{ config
set -o vi
# }}}
# {{{ functions
fn trysource file
    if test -e $file; source $file; end
end

fn plugin_path name
    echo ${ION_PLUGIN}/${name}
end

fn PROMPT
    let git_info="$($(plugin_path git_prompt))"
    echo "${c::blue}${PWD}${c::default} ${git_info} "
    echo -en "${c::magenta}‚ùØ${c::default} "
end

fn pubkey
    let path="${HOME}/.ssh/id_rsa.pub"

    if test $(uname -s) = "Darwin"
        cat ${path} | pbcopy
    end
    xclip -sel clip < ${path}

    echo "${path} copied to clipboard"
end
# }}}
# {{{ env
export DOTFILES="${HOME}/.dotfiles"
export ION_PLUGIN="${DOTFILES}/sh-plugins/bin/"
export EDITOR="nvim"
export GOPATH="${HOME}/gocode"
export PATH="${GOPATH}/bin:${DOTFILES}/bin:${PATH}"
export SKIM_DEFAULT_COMMAND="git ls-tree -r --name-only HEAD || rg --files || fd ."
# }}}
# {{{ aliases
alias b="bat --theme=zenburn"
alias g="git"
alias gf="git fetch --all"
alias k="kubectl"
alias se="sudo -E ${EDITOR}"
alias vc="${EDITOR} ~/.config/nvim/init.vim"
alias x="exa"
alias xx="exa -l"
# }}}

trysource "${HOME}/.localrc.ion"

# vim: filetype=ion foldmethod=marker
